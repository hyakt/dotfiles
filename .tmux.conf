# keybind
#---------------
set -g prefix C-x
unbind-key C-c
unbind C-b

# tab like control
bind -n C-t select-pane -t :.+
bind -n M-t new-window
bind -n M-\} next-window
bind -n M-\{ previous-window

# emacs like control
setw -g mode-keys emacs
bind-key C-x send-prefix
unbind 1
unbind ^C
unbind &
unbind b

# prefix 0 現在のペインを削除
bind 0 kill-pane
# prefix 1 ウインドウ内の現在のペインを残し、他のペインをウインドウにする
bind 1 break-pane
# prefix 2 ウインドウを横に分割
bind 2 split-window -v
# prefix 3 ウインドウを縦に分割
bind 3 split-window -h
# prefix o ペインをローテート
bind o select-pane -t :.+
# prefix k ウインドウを削除
bind k kill-window
# prefix C-k ペインを削除
bind C-k kill-pane
# prefix i
bind i display-panes
# prefix C-t
bind C-t next-window
# prefix c
bind c  new-window
# prefix b セッションの一覧を表示
bind C-b list-sessions
# prefix セッションを終了する
bind C-c kill-server

# マウス操作を有効にする
set -g mouse on
bind -n WheelUpPane if-shell -F -t = "#{mouse_any_flag}" "send-keys -M" "if -Ft= '#{pane_in_mode}' 'send-keys -M' 'copy-mode -e'"


###############################################################
# 色・見た目
###############################################################

# ステータスバーを 1 秒毎に描画し直す
set -g status-interval 1

# センタライズ （主にウインドウ番号など）
set -g status-justify centre

# ステータスバーをトップに配置する
set -g status-position top

# #P => ペイン番号を最左に表示
set -g status-left '%H:[#P]'
set -g status-right "#[fg=colour255,bg=colour241] #h | LA: #(cut -d' ' -f-3 /proc/loadavg) | %m/%d %H:%M:%S#[default]"

# センタライズ（主にウインドウ番号など）
set -g status-justify centre

# ステータスバーの色を設定する
set -g status-bg "colour238"
set -g status-fg "colour255"

# tmuxを 256 色表示できるようにする
set -g default-terminal xterm-256color
set -g terminal-overrides 'xterm:colors=256'

###############################################################
# ペイン左下に現在ログインしているホスト名を表示
###############################################################
set -g pane-border-status bottom
set -g pane-border-format "#T #(tmux-pane-border #{pane_current_command} #{pane_pid})"
set -g pane-border-style fg="colour023"
set -g pane-active-border fg="blue"

# TPM
# run '~/.tmux/plugins/tpm/tpm'


# # Prefix
# set-option -g prefix C-t
# unbind C-b

# # Option
# set-option -g default-terminal screen-256color
# set-window-option -g utf8 on
# set-window-option -g automatic-rename off
# set-window-option -g mode-keys emacs
# set-option -g base-index 1
# unbind t
# unbind h
# unbind 1

# # KeyBindings
# ## check keybind
# bind / list-keys -t emacs-copy
# ## reload conf
bind r source-file ~/.tmux.conf\; display-message "Reload Config!!"
# ## previous window
# bind C-q last-window
# ## select window
# bind C-w choose-window
# ## resize pane
# bind -r h resize-pane -L 5
# bind -r l resize-pane -R 5
# bind -r j resize-pane -D 5
# bind -r k resize-pane -U 5
# ## operation window
# bind i display-panes
# set -g display-panes-time 10000
# bind 1 break-pane
# bind 2 split-window -v
# bind 3 split-window -h
# bind C-k kill-pane
# ## mouse mode swich
# # mouse change -> http://bit.ly/ZzG7iN
# set-option -gw mode-mouse off
# bind-key m \
#   if-shell "tmux show-options -gw mode-mouse | grep off" "set-option -gq mouse-utf8 on" "set-option -gq mouse-utf8 off" \;\
#   if-shell "tmux show-options -gw mode-mouse | grep off" "set-option -gq mouse-resize-pane on" "set-option -gq mouse-resize-pane off" \;\
#   if-shell "tmux show-options -gw mode-mouse | grep off" "set-option -gq mouse-select-pane on" "set-option -gq mouse-select-pane off" \;\
#   if-shell "tmux show-options -gw mode-mouse | grep off" "set-option -gq mouse-select-window on" "set-option -gq mouse-select-window off" \;\
#   if-shell "tmux show-options -gw mode-mouse | grep off" "set-option -gw mode-mouse on" "set-option -gw mode-mouse off"

# # View
# set -g status-interval 10
# set -g status-left-length 60
# set -g status-left "#(whoami)@#H > "
# set -g status-right-length 60
# set -g status-right "#[fg=#00BFFF]< #S #I:#P #[fg=#9057EB]< #(tmux show-option -gw mode-mouse|sed 's/mode-//;s/ /:/') #[fg=yellow]< %Y/%m/%d(%a) #[fg=green]< %R"
# set -g window-status-format "#I #W >"
# set -g window-status-current-format "#[fg=colour196]#I #W >"

# #### COLOUR (Solarized dark)
# #### cf: https://github.com/altercation/solarized/blob/master/tmux/tmuxcolors-dark.conf

# # default statusbar colors
# set-option -g status-bg black #base02
# set-option -g status-fg yellow #yellow
# set-option -g status-attr default

# # default window title colors
# set-window-option -g window-status-fg brightblue #base0
# set-window-option -g window-status-bg default
# #set-window-option -g window-status-attr dim

# # active window title colors
# set-window-option -g window-status-current-fg brightred #orange
# set-window-option -g window-status-current-bg default
# #set-window-option -g window-status-current-attr bright

# # pane border
# set-option -g pane-border-fg black #base02
# set-option -g pane-active-border-fg brightgreen #base01

# # message text
# set-option -g message-bg black #base02
# set-option -g message-fg brightred #orange

# # pane number display
# set-option -g display-panes-active-colour blue #blue
# set-option -g display-panes-colour brightred #orange
